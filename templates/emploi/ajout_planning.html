{% extends 'dash.html' %}
{% load static %}

{% block title %} SPLANNING | Création d'un emploi de temps {% endblock %}

{% block content %}

<style>

    td:hover{
        background: #0b5dd72a;
    }

    tbody td{
        cursor: pointer;
        text-align: center;
        position: relative;
    }

</style>

<div class="text-center py-3" style="color: #0b5ed7;">
    <h2>{{classe}}</h2>
</div>

<div class=" tresp table-responsive">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Heures</th>
                <th>Lundi</th>
                <th>Mardi</th>
                <th>Mercredi</th>
                <th>Jeudi</th>
                <th>Vendredi</th>
                <th>Samedi</th>
                <th>Dimanche</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th id="h_1">7h-9h55</th>
                <td id="lun_1">
                    INF_3196 <br>
                    S006 <br>
                    Dr. MONTHE Valery <br>
                    <a href=""><i class="uil uil-trash-alt"></i></a>
                    <a href="{% url 'modifier_planning' %}"><i class="uil uil-edit"></i></a>
                </td>
                <td id="mard_1"></td>
                <td id="mer_1"></td>
                <td id="jeu_1"></td>
                <td id="ven_1"></td>
                <td id="sam_1"></td>
                <td id="dim_1"></td>
            </tr>
            <tr>
                <th id="h_2">10h05-12h55</th>
                <td id="lun_2"></td>
                <td id="mard_2"></td>
                <td id="mer_2"></td>
                <td id="jeu_2"></td>
                <td id="ven_2"></td>
                <td id="sam_2"></td>
                <td id="dim_2"></td>
            </tr>
            <tr>
                <th id="h_3">13h05-15h55</th>
                <td id="lun_3"></td>
                <td id="mard_3"></td>
                <td id="mer_3"></td>
                <td id="jeu_3"></td>
                <td id="ven_3"></td>
                <td id="sam_3"></td>
                <td id="dim_3"></td>
            </tr>
            <tr>
                <th id="h_4">16h05-18h55</th>
                <td id="lun_4"></td>
                <td id="mard_4"></td>
                <td id="mer_4"></td>
                <td id="jeu_4"></td>
                <td id="ven_4"></td>
                <td id="sam_4"></td>
                <td id="dim_4"></td>
            </tr>
            <tr>
                <th id="h_5">19h05-21h55</th>
                <td id="lun_5"></td>
                <td id="mard_5"></td>
                <td id="mer_5"></td>
                <td id="jeu_5"></td>
                <td id="ven_5"></td>
                <td id="sam_5"></td>
                <td id="dim_5"></td>
            </tr>
        </tbody>
    </table>
</div>

<div class="mt-4">
    <a href="{% url 'dashboard' %}" class="btn-bleu"><i class="uil uil-arrow-left"></i> Retour</a>
</div>



<!-- Button trigger modal -->
<button style="display: none;" id="myBtn" type="button" class="btn-rouge" data-bs-toggle="modal" data-bs-target="#ajoutPlanning">
    Launch demo modal
</button>
  
  <!-- Modal -->
<div class="modal fade" id="ajoutPlanning" data-bs-backdrop="static" tabindex="-1" aria-labelledby="ajoutPlanningLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ajoutPlanningLabel" style="color: #0b5ed7;">Ajouter un cours</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="" method="post">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-6 mt-3">
                                <div class="form-group">
                                    <select class="form-select jour" name="jour" id="id_jour" disabled>
                                        <option id="ini" value="">Jour</option>
                                    </select>
                                    <!-- <p>
                                        <label for="id_jour">Jour&nbsp;:</label>
                                        <select name="jour" required="" id="id_jour" class="form-select">
                                            <option value="" selected="">---------</option>
                                            
                                            <option value="lundi">lundi</option>
                                            
                                            <option value="mardi">mardi</option>
                                            
                                            <option value="mercredi">mercredi</option>
                                            
                                            <option value="jeudi">jeudi</option>
                                            
                                            <option value="vendredi">vendredi</option>
                                            
                                            <option value="samedi">samedi</option>
                                            
                                            <option value="dimanche">dimanche</option>
                                            
                                        </select>
                                    </p> -->
                                </div>
                            </div>
                            <div class="col-md-6 mt-3">
                                <div class="form-group">
                                    <select class="form-select heure" name="heure" id="id_heure" disabled>
                                        <option value="">Plage horaire</option>
                                    </select>
                                    <!-- <input type="text" name="heure" maxlength="12" required="" id="id_heure" class="form-control"> -->
                                </div>
                            </div>
                            <div class="col-md-6 mt-3">
                                <div class="form-group">
                                    <!-- <select class="form-select" name="ue" id="ue">
                                        <optgroup label="Licence 1">
                                            <option value="">Intitulé</option>
                                        </optgroup>
                                        <optgroup label="Licence 2">
                                            <option value="">Intitulé</option>
                                        </optgroup>
                                        <optgroup label="Licence 3">
                                            <option value="">Intitulé</option>
                                        </optgroup>
                                        <optgroup label="Master 1">
                                            <option value="">Intitulé</option>
                                        </optgroup>
                                    </select> -->

                                    <p>
                                        <label for="id_ue">Ue&nbsp;:</label>
                                        <select name="ue" required="" id="id_ue" class="form-select">
                                            <option value="" selected="">---------</option>
                                            {% for ue in ueList %}
                                            {% if ue.classe == classe %}
                                                <option value="{{ue.id}}">{{ue}}</option>
                                            {% endif %}
                                            {% endfor %}
                                        </select>
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-6 mt-3">
                                <div class="form-group">
                                    <!-- <select class="form-select" name="type" id="type">
                                        <option value="">Type de cours</option>
                                    </select> -->
                                    <p>
                                        <label for="id_type">Type&nbsp;:</label>
                                        <select name="type" required="" id="id_type" class="form-select">
                                            <option value="" selected="">---------</option>
                                            <option value="CM">CM</option>
                                            <option value="TD">TD</option>
                                        </select>
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-6 mt-3">
                                <div class="form-group">
                                    <!-- <select class="form-select" name="salle" id="salle">
                                        <option value="">Salle</option>
                                    </select> -->
                                    <p>
                                        <label for="id_salle">Salle&nbsp;:</label>
                                        <select name="salle" required="" id="id_salle" class="form-select">
                                            <option value="" selected="">---------</option>
                                            <option value="1">A250</option>
                                            <option value="2">AI</option>
                                        </select>
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-6 mt-3">
                                <div class="form-group">
                                    <p>
                                        <label for="id_groupe">Groupe&nbsp;:</label>
                                        <select name="groupe" required="" id="id_groupe" class="form-select">
                                            <option value="" selected="">---------</option>
                                        </select>
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-6 mt-3">
                                <div class="form-group">
                                    <p>
                                        <label for="id_date">Date&nbsp;:</label>
                                        {{cours_form.date}}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-bleu" data-bs-dismiss="modal">Annuler</button>
                    <input class="btn-rouge" type="submit" value="Enregistrer">
                </div>
            </form>
        </div>
    </div>
</div>



<script>

    champs = document.getElementsByTagName('input');
      for (let i = 0; i < (champs.length-1); i++) {
          champs[i].classList.add('form-control');
          champs[i].addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            document.getElementById("btn-sub").click();
        }
      });
    }
    champSel = document.getElementsByTagName('select');
        for (let i = 0; i < (champSel.length); i++) {
            champSel[i].classList.add('form-select');
            champSel[i].addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                document.getElementById("btn-sub").click();
            }
        });
    }



    // Rendre le lien actif
    
    let list = document.getElementsByClassName('list');
    for (let i = 0; i < list.length; i++) {
        list[i].className = 'list';
    }
    document.getElementById('dash').className = 'list active';


    // chercher le jour et l'heure correspondante

    jour = document.querySelector('.jour option');
    heure = document.querySelector('.heure option');

    const cases = document.getElementsByTagName('td');

    function initChamps(j, h) {
        jour.value = j;
        jour.innerHTML = j;

        heure.value = h;
        heure.innerHTML = h;
    }
    for (let i = 0; i < cases.length; i++) {
        cases[i].addEventListener('click', () => {
            let caseId = cases[i].id; 
            // alert(caseId);

            if(caseId == "lun_1"){
                initChamps("lundi", "7h-9h55")
            }else if(caseId == "mar_1"){
                initChamps("mardi", "7h-9h55")
            }else if(caseId == "mer_1"){
                initChamps("mercredi", "7h-9h55")
            }else if(caseId == "jeu_1"){
                initChamps("jeudi", "7h-9h55")
            }else if(caseId == "ven_1"){
                initChamps("vendredi", "7h-9h55")
            }else if(caseId == "sam_1"){
                initChamps("samedi", "7h-9h55")
            }else if(caseId == "dim_1"){
                initChamps("dimanche", "7h-9h55")
            }


            if(caseId == "lun_2"){
                initChamps("lundi", "10h05-12h55")
            }else if(caseId == "mar_2"){
                initChamps("mardi", "10h05-12h55")
            }else if(caseId == "mer_2"){
                initChamps("mercredi", "10h05-12h55")
            }else if(caseId == "jeu_2"){
                initChamps("jeudi", "10h05-12h55")
            }else if(caseId == "ven_2"){
                initChamps("vendredi", "10h05-12h55")
            }else if(caseId == "sam_2"){
                initChamps("samedi", "10h05-12h55")
            }else if(caseId == "dim_2"){
                initChamps("dimanche", "10h05-12h55")
            }


            if(caseId == "lun_3"){
                initChamps("lundi", "13h05-15h55")
            }else if(caseId == "mar_3"){
                initChamps("mardi", "13h05-15h55")
            }else if(caseId == "mer_3"){
                initChamps("mercredi", "13h05-15h55")
            }else if(caseId == "jeu_3"){
                initChamps("jeudi", "13h05-15h55")
            }else if(caseId == "ven_3"){
                initChamps("vendredi", "13h05-15h55")
            }else if(caseId == "sam_3"){
                initChamps("samedi", "13h05-15h55")
            }else if(caseId == "dim_3"){
                initChamps("dimanche", "13h05-15h55")
            }


            if(caseId == "lun_4"){
                initChamps("lundi", "16h05-18h55")
            }else if(caseId == "mar_4"){
                initChamps("mardi", "16h05-18h55")
            }else if(caseId == "mer_4"){
                initChamps("mercredi", "16h05-18h55")
            }else if(caseId == "jeu_4"){
                initChamps("jeudi", "16h05-18h55")
            }else if(caseId == "ven_4"){
                initChamps("vendredi", "16h05-18h55")
            }else if(caseId == "sam_4"){
                initChamps("samedi", "16h05-18h55")
            }else if(caseId == "dim_4"){
                initChamps("dimanche", "16h05-18h55")
            }


            if(caseId == "lun_5"){
                initChamps("lundi", "19h05-21h55")
            }else if(caseId == "mar_5"){
                initChamps("mardi", "19h05-21h55")
            }else if(caseId == "mer_5"){
                initChamps("mercredi", "19h05-21h55")
            }else if(caseId == "jeu_5"){
                initChamps("jeudi", "19h05-21h55")
            }else if(caseId == "ven_5"){
                initChamps("vendredi", "19h05-21h55")
            }else if(caseId == "sam_5"){
                initChamps("samedi", "19h05-21h55")
            }else if(caseId == "dim_5"){
                initChamps("dimanche", "19h05-21h55")
            }

            document.getElementById("myBtn").click();
        });
    }
</script>

{% endblock %}
